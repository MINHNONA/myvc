<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hoàn Thành Bước Để Mở Khóa Liên Kết</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #121212;
            color: #e0e0e0;
            margin: 0;
            padding: 0;
        }
        .container {
            width: 90%;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background: #1e1e1e;
            box-shadow: 0 0 15px rgba(0,0,0,0.5);
            border-radius: 10px;
        }
        .video-container {
            text-align: center;
            margin-bottom: 20px;
        }
        .video-container iframe {
            width: 100%;
            height: 315px;
            border: none;
            border-radius: 5px;
        }
        h1 {
            text-align: center;
            color: #e0e0e0;
            margin-bottom: 20px;
            font-size: 18px;
            background: #333;
            padding: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
            border-radius: 5px;
        }
        .button-container {
            text-align: center;
            margin-top: 20px;
        }
        .button-container button, .unlock-links a {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 15px 30px;
            border: 2px solid white;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            text-align: center;
            transition: background 0.3s, transform 0.3s;
            color: white;
        }
        .button-container button {
            background: #ff0000; /* Màu đỏ ban đầu */
        }
        .button-container button.enabled {
            background: #28a745; /* Màu xanh khi sao chép gợi ý */
            transform: scale(1.05);
        }
        .button-container button.enabled:hover {
            background: #218838;
        }
        .unlock-links {
            text-align: center;
            margin-top: 20px;
            display: none;
            opacity: 0;
            transition: opacity 0.5s;
        }
        .unlock-links.show {
            display: block;
            opacity: 1;
        }
        .unlock-links a {
            background: #333;
            color: #e0e0e0;
            text-decoration: none;
            margin: 10px 0;
            cursor: not-allowed;
            transition: background 0.3s, color 0.3s;
        }
        .unlock-links a.enabled {
            background: #28a745;
            color: white;
            cursor: pointer;
        }
        .unlock-links a.enabled:hover {
            background: #218838;
        }
        .suggestion-item {
            background: #333;
            padding: 15px;
            margin: 10px 0;
            position: relative;
            border-radius: 5px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
            display: none;
        }
        .copy-button {
            margin-top: 10px;
            padding: 8px 15px;
            background: #007bff;
            color: white;
            border: 2px solid white;
            border-radius: 5px;
            cursor: not-allowed;
            font-size: 14px;
            transition: background 0.3s;
        }
        .copy-button.enabled {
            cursor: pointer;
            background: #007bff;
        }
        .copy-button:hover {
            background: #0056b3;
        }
        .button-container button .fa, .unlock-links a .fa {
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="video-container">
            <div id="player"></div>
        </div>
        <h1>Anh em hãy hoàn thành các bước dưới đây để mở khóa link!</h1>
        <div class="suggestions" id="suggestions"></div>
        <div class="button-container">
            <button id="openVideoButton" disabled><i class="fa fa-play"></i> Mở video YouTube</button>
        </div>
        <div class="unlock-links" id="unlockLinks">
            <a id="unlockLink1" href="YOUR_UNLOCK_LINK_1" target="_blank" class="disabled"><i class="fa fa-link"></i> Mở khóa liên kết 1</a>
            <a id="unlockLink2" href="YOUR_UNLOCK_LINK_2" target="_blank" class="disabled"><i class="fa fa-link"></i> Mở khóa liên kết 2</a>
            <a id="unlockLink3" href="YOUR_UNLOCK_LINK_3" target="_blank" class="disabled"><i class="fa fa-link"></i> Mở khóa liên kết 3</a>
        </div>
    </div>
    <script>
        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        var player;
        var watchedTime = 0;
        var intervalId;

        function onYouTubeIframeAPIReady() {
            var videoId = getUrlParameter('video');
            if (videoId) {
                player = new YT.Player('player', {
                    height: '315',
                    width: '100%',
                    videoId: videoId,
                    events: {
                        'onStateChange': onPlayerStateChange
                    }
                });
            } else {
                console.error("Video ID not found in URL.");
            }
        }

        function getUrlParameter(name) {
            name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
            var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
            var results = regex.exec(location.search);
            return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
        }

        function onPlayerStateChange(event) {
            if (event.data == YT.PlayerState.PLAYING) {
                intervalId = setInterval(function() {
                    watchedTime += 1;
                    if (watchedTime >= 60) {
                        displaySuggestion();
                        clearInterval(intervalId);
                    }
                }, 1000);
            } else {
                clearInterval(intervalId);
            }
        }

        var suggestions = [
            "Ứng dụng rất hữu ích và dễ sử dụng.",
            "Tôi đã cải thiện kỹ năng headshot đáng kể nhờ ứng dụng này.",
            "Giao diện thân thiện và nhiều tính năng hữu ích.",
            "Ứng dụng này thực sự đã giúp tôi chơi Free Fire tốt hơn."
        ];

        function displaySuggestion() {
            var suggestion = suggestions[Math.floor(Math.random() * suggestions.length)];
            document.getElementById("suggestions").innerHTML = '<div class="suggestion-item">' + suggestion + '<button id="copyButton" class="copy-button" onclick="copyToClipboard(\'' + suggestion + '\')"><i class="fa fa-copy"></i> Copy</button></div>';
            document.querySelector('.suggestion-item').style.display = 'block';
            enableVideoButton();
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert("Đã copy vào clipboard!");
                enableVideoButton();
            }).catch(err => {
                console.error('Không thể copy', err);
            });
        }

        function enableVideoButton() {
            var button = document.getElementById("openVideoButton");
            button.disabled = false;
            button.classList.add("enabled");
            button.style.background = "#28a745"; // Màu xanh sau khi sao chép gợi ý
        }

        function openVideo() {
            var button = document.getElementById("openVideoButton");
            var videoId = getUrlParameter('video');
            if (videoId) {
                button.style.display = "none"; // Ẩn nút sau khi ấn
                player.loadVideoById(videoId); // Mở video theo ID
                unlockLinks(); // Hiển thị liên kết
            } else {
                console.error("Video ID not found in URL.");
            }
        }

        function unlockLinks() {
            var linksContainer = document.getElementById('unlockLinks');
            linksContainer.classList.add('show'); // Hiển thị các liên kết
            var links = linksContainer.querySelectorAll('a');
            links.forEach(link => {
                link.classList.remove('disabled');
                link.classList.add('enabled');
            });
        }

        document.getElementById('openVideoButton').onclick = openVideo;

        window.onload = function() {
            onYouTubeIframeAPIReady();
        };
    </script>
</body>
</html>
